(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{489:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-34-19.c6e9aa93.png"},490:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-34-31.ac7c04f8.png"},491:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-34-37.37f9fa6c.png"},492:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-35-01.c507cbb5.png"},493:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-38-37.b4f30fcc.png"},494:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-39-09.cb4ac283.png"},495:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-39-14.1304e958.png"},496:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-40-41.1a78bf5f.png"},497:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-40-47.c094a58f.png"},498:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-41-54.f544e177.png"},499:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-42-00.3992fae9.png"},500:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-42-23.0309ba5a.png"},501:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-42-42.e738851c.png"},502:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-43-21.0427799c.png"},503:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-43-59.d789b658.png"},504:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-48-04.d497a87d.png"},505:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-48-15.5f00dbf4.png"},506:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-48-53.bfecd0f2.png"},507:function(s,a,t){s.exports=t.p+"assets/img/OMV-2020-08-26-16-51-30.0e7527ee.png"},508:function(s,a){s.exports="data:image/png;base64,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"},509:function(s,a,t){s.exports=t.p+"assets/img/200826_173142_WindowsTerminal_iMc2.8b82df4a.png"},679:function(s,a,t){"use strict";t.r(a);var e=t(28),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("这一篇文章讲怎么让 OMV 系统拥有冗余功能。也就是在 raid 上安装 OMV 系统，坏掉任意一块硬盘的情况下，系统照样能启动。")]),s._v(" "),e("h2",{attrs:{id:"准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[s._v("#")]),s._v(" 准备")]),s._v(" "),e("blockquote",[e("p",[s._v("本文所用镜像为  "),e("code",[s._v("debian-10.5.0-amd64-netinst.iso")])])]),s._v(" "),e("blockquote",[e("p",[s._v("注意，演示所用环境，启动方式为 UEFI，非 secure boot，硬盘协议为 SATA，需要空间，10G 以上，推荐 60G 或更大空间。安装之前推荐将机器连接网络。")])]),s._v(" "),e("blockquote",[e("p",[s._v("最好有 Linux 安装经验，看到英文不要慌，遇到和文章里不一样的，或者是看不懂的，尝试去翻译一下。每张图具体是什么意思，翻译一下图上的英文就能看懂，这个真的不难，我这个四级没过的废物都能看得懂。")])]),s._v(" "),e("p",[s._v("这一次我们需要从 Debian 安装 OMV，所以需要一个 Debian10 的镜像，可以在"),e("a",{attrs:{href:"https://mirrors.huaweicloud.com/debian-cd/",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),e("OutboundLink")],1),s._v("下载。")]),s._v(" "),e("p",[s._v("本文目的是讲 Debian 安装在 raid1 上，并在每个硬盘上安装引导，做的在任意一块硬盘损坏的情况下，系统均能正常启动。")]),s._v(" "),e("h2",{attrs:{id:"视频教程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#视频教程"}},[s._v("#")]),s._v(" 视频教程")]),s._v(" "),e("Bilibili",{attrs:{bvid:"BV1Hh411R7iD",page:1,danmaku:!0}}),s._v(" "),e("h2",{attrs:{id:"安装-debian"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-debian"}},[s._v("#")]),s._v(" 安装 Debian")]),s._v(" "),e("p",[s._v("请确保系统插入了两块以上的硬盘用于安装系统盘，接下来跟我我的讲解进入安装步骤。")]),s._v(" "),e("p",[s._v("首先进入图形化安装界面，语言选择英文即可。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(489),alt:"安装界面"}})]),s._v(" "),e("p",[e("img",{attrs:{src:t(490),alt:"语言选择"}})]),s._v(" "),e("p",[s._v("区域选择中国，键盘选择美式键盘。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(491),alt:"区域和键盘"}})]),s._v(" "),e("p",[e("img",{attrs:{src:t(492),alt:"区域和键盘"}})]),s._v(" "),e("p",[s._v("再接下来是网络设置，下面两张图填写的是主机名，这里根据你自己的实际情况填写，不懂的话默认即可，不需要修改。如果你的机器没有联网，会让你手动设置，这个时候跳过即可。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(493),alt:"网络设置"}})]),s._v(" "),e("p",[s._v("接下来输入 root 密码。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(494),alt:"输入root密码"}})]),s._v(" "),e("p",[s._v("再接下来创建一个新用户。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(495),alt:"创建新用户"}})]),s._v(" "),e("p",[s._v("然后是硬盘部分，这是这篇文章的重点之一，这里选择手动分区。")]),s._v(" "),e("p",[s._v("先创建好分区表，选择对应的硬盘，直接回车即可创建。注意这会清空硬盘里原有的分区，并且会清空数据。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(496),alt:"创建好分区表"}})]),s._v(" "),e("p",[s._v("然后创建一个 EFI 分区，不用太大，够用就行，你如果嫌小，可以自己改大一点。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(497),alt:"创建EFI分区"}})]),s._v(" "),e("p",[s._v("对另一块硬盘做相同的操作，两块硬盘最好是完全一致。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(498),alt:"另一块硬盘"}})]),s._v(" "),e("p",[s._v("然后开始创建软 raid，过程可以看图，看不懂的简单翻译一下就明白了。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(499),alt:"创建软raid"}})]),s._v(" "),e("p",[s._v("两块硬盘都选上，空闲 0 块。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(500),alt:"创建软raid"}})]),s._v(" "),e("p",[s._v("选择未分区的两个位置，创建软 raid。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(501),alt:"创建软raid"}})]),s._v(" "),e("p",[s._v("然后为创建出来的软 raid 分区，这里演示只有一个分区，没有必要按照网上教程分那么多区，然后分目录去挂载，一个就可以。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(502),alt:"软raid分区"}})]),s._v(" "),e("p",[s._v("然后确定不要 swap 分区，并且确定分区的更改。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(503),alt:"确定分区更改"}})]),s._v(" "),e("p",[s._v("确定不插入其他 CD。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(504),alt:"CD"}})]),s._v(" "),e("p",[s._v("选择合适的镜像源，这里选你认为最快的。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(505),alt:"选择镜像源"}})]),s._v(" "),e("p",[s._v("选择需要安装的服务。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(506),alt:"需要安装的服务"}})]),s._v(" "),e("p",[s._v("最后等安装完成，重启应该就可以进入系统。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(507),alt:"安装完成"}})]),s._v(" "),e("h2",{attrs:{id:"创建另一个启动项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建另一个启动项"}},[s._v("#")]),s._v(" 创建另一个启动项")]),s._v(" "),e("p",[s._v("这样虽然把系统安装在了 raid1 上，但是引导只安装在了一块硬盘上，如果引导所在的硬盘挂了，那系统照样是会挂的。")]),s._v(" "),e("p",[s._v("接下来需要安装另一个启动引导。")]),s._v(" "),e("p",[s._v("登录系统，输入")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ip addr\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看当前 ip。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(508),alt:"查看ip"}})]),s._v(" "),e("p",[s._v("然后远程登录上去。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ssh mc@192.168.91.136\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后切换到 root 用户，安装一些必要的软件")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" net-tools efibootmgr\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("将 mc 添加进 sudo 用户组")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("/sbin/usermod -a -G "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mc")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后关掉 ssh 连接，重新登录一遍。")]),s._v(" "),e("p",[s._v("输入")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -h\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:t(509),alt:"查看磁盘"}})]),s._v(" "),e("p",[s._v("可以看到  "),e("code",[s._v("/dev/sda1")]),s._v("  是当前的 efi 磁盘，需要克隆到  "),e("code",[s._v("/dev/sdb1")]),s._v("  上（这个需要自行判断实际情况）。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/sda1 "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/sdb1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后创建新的引导项（下面的命令需要你根据实际情况自行修改）。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" efibootmgr -c -g -d /dev/sdb -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -L "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"debian #2"')]),s._v(" -l "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\EFI\\debian\\shimx64.efi'")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),e("p",[s._v("然后重启看一下是不是有了一个启动项  "),e("code",[s._v("debian #2")]),s._v(" ，尝试一下用这个启动项启动系统，然后再尝试分别拔掉两块硬盘，系统能否正常启动。")]),s._v(" "),e("h2",{attrs:{id:"安装-omv"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-omv"}},[s._v("#")]),s._v(" 安装 OMV")]),s._v(" "),e("blockquote",[e("p",[s._v("建议：安装 OMV 之前将  "),e("code",[s._v("security.debian.org")]),s._v("  也替换掉")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s@http://security.debian.org@https://mirrors.huaweicloud.com@g"')]),s._v(" /etc/apt/sources.list\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("p",[s._v("首先将系统更新到最新")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" dist-upgrade\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("添加密钥")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --yes gnupg\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/apt/trusted.gpg.d/openmediavault-archive-keyring.asc"')]),s._v(" https://packages.openmediavault.org/public/archive.key\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/apt/trusted.gpg.d/openmediavault-archive-keyring.asc"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("添加软件源")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/apt/sources.list.d/openmediavault.list\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("写入内容为：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("deb https://packages.openmediavault.org/public usul main\n# deb https://downloads.sourceforge.net/project/openmediavault/packages usul main\n## Uncomment the following line to add software from the proposed repository.\ndeb https://packages.openmediavault.org/public usul-proposed main\n# deb https://downloads.sourceforge.net/project/openmediavault/packages usul-proposed main\n## This software is not part of OpenMediaVault, but is offered by third-party\n## developers as a service to OpenMediaVault users.\n# deb https://packages.openmediavault.org/public usul partner\n# deb https://downloads.sourceforge.net/project/openmediavault/packages usul partner\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("然后安装")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("LANG")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("C.UTF-8\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEBIAN_FRONTEND")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("noninteractive\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("APT_LISTCHANGES_FRONTEND")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" --yes --auto-remove --show-upgraded "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --allow-downgrades --allow-change-held-packages "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --no-install-recommends "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --option Dpkg::Options::"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--force-confdef"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --option DPkg::Options::"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--force-confold"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openmediavault-keyring openmediavault\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" omv-confdbadm populate\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("中间遇到什么需要让你手动选择的，全都是默认选项即可。")]),s._v(" "),e("p",[s._v("然后在浏览器输入机器的 ip 或者是 "),e("code",[s._v("debian/")]),s._v("  即可访问后台网络面板。")]),s._v(" "),e("p",[s._v("至于硬盘坏了怎么恢复，会在以后的文章中讲到。")]),s._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://wiki.debian.org/DebianInstaller/SoftwareRaidRoot",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://wiki.debian.org/DebianInstaller/SoftwareRaidRoot"),e("OutboundLink")],1),e("br"),s._v(" "),e("a",{attrs:{href:"https://www.jianshu.com/p/5557b6172b97",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.jianshu.com/p/5557b6172b97"),e("OutboundLink")],1),e("br"),s._v(" "),e("a",{attrs:{href:"https://openmediavault.readthedocs.io/en/5.x/installation/on_debian.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://openmediavault.readthedocs.io/en/5.x/installation/on_debian.html"),e("OutboundLink")],1)]),s._v(" "),e("hr")],1)}),[],!1,null,null,null);a.default=n.exports}}]);