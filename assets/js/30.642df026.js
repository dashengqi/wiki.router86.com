(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{453:function(t,a,v){"use strict";v.r(a);var s=v(15),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"条件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#条件"}},[t._v("#")]),t._v(" 条件")]),t._v(" "),v("p",[t._v("两台以上刷了 OpenWRT 系统的路由器，并且两台机器都需要支持 802.11kvr 协议，而且需要较新的固件，并且有  "),v("code",[t._v("wpad-basic")]),t._v(" 。")]),t._v(" "),v("p",[t._v("两台以上机器，全部按照 "),v("RouterLink",{attrs:{to:"/02.软路由/0030.特殊用法/0020.OpenWRT作为AP使用.html"}},[t._v("OpenWRT 作为 AP 使用")]),t._v(" 教程设置为 AP，并将 WIFI 设置为同名。")],1),t._v(" "),v("h2",{attrs:{id:"收集信息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#收集信息"}},[t._v("#")]),t._v(" 收集信息")]),t._v(" "),v("p",[t._v("先打开一个记事本，等下要记的东西全写到记事本里，拷贝方便。")]),t._v(" "),v("p",[t._v("首先是打开每台路由器的后台，查看 BSSID，并记录下")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://file.sm9.top/item/5fbd1877b18d6271134e6b77.png",alt:""}})]),t._v(" "),v("blockquote",[v("p",[t._v("为了方便，我们直接拿 bssid 来生成 nasid，也就是内容一致，去掉冒号。")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("信息项")]),t._v(" "),v("th",[t._v("路由器 1")]),t._v(" "),v("th",[t._v("路由器 2")]),t._v(" "),v("th",[t._v("备注")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("bssid")]),t._v(" "),v("td",[v("code",[t._v("14:3D:F2:CC:**:**")])]),t._v(" "),v("td",[v("code",[t._v("8C:AB:8E:B8:**:**")])]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("nasid")]),t._v(" "),v("td",[v("code",[t._v("143DF2CC****")])]),t._v(" "),v("td",[v("code",[t._v("8CAB8EB8****")])]),t._v(" "),v("td",[t._v("上面的 bssid 去掉冒号")])])])]),t._v(" "),v("p",[t._v("配置 802.11r 需要生成一个 32 位的 16 进制字符串，安全考虑，建议自行生成不要复制别人的")]),t._v(" "),v("p",[t._v("我是直接在 WSL 中的 ubuntu 用 xxd 命令生成一个：")]),t._v(" "),v("div",{staticClass:"language-bash line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[t._v("xxd -l "),v("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" -p /dev/random\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br")])]),v("p",[v("img",{attrs:{src:"https://file.sm9.top/item/5fbd1a95b18d6271134f1c33.png",alt:""}})]),t._v(" "),v("p",[t._v("按照 bssid,nasid, 密钥 的格式生成 r0kh 配置：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("14:3D:F2:CC:**:**,143DF2CC****,ca545afdabeac7550286b1a43b2b3e9a")])]),t._v(" "),v("li",[v("code",[t._v("8C:AB:8E:B8:**:**,8CAB8EB8****,ca545afdabeac7550286b1a43b2b3e9a")])])]),t._v(" "),v("p",[t._v("按照 bssid,bssid, 密钥 的格式生成 r1kh 配置：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("14:3D:F2:CC:**:**,14:3D:F2:CC:**:**,ca545afdabeac7550286b1a43b2b3e9a")])]),t._v(" "),v("li",[v("code",[t._v("8C:AB:8E:B8:**:**,8C:AB:8E:B8:**:**,ca545afdabeac7550286b1a43b2b3e9a")])])]),t._v(" "),v("p",[t._v("配置开启 802.11kvr")]),t._v(" "),v("p",[t._v("在无线安全选项卡中，按照上面记录的值设置，两台机器都需要设置。")]),t._v(" "),v("ul",[v("li",[t._v("NAS ID，前面记录的值，需要与本机的 bssid 对应")]),t._v(" "),v("li",[t._v("R1 密钥持有者，与上面的 nasid 一样")]),t._v(" "),v("li",[t._v("R1 推送 PMK，勾选上")]),t._v(" "),v("li",[t._v("外部 R0KH 列表，前面记录的")]),t._v(" "),v("li",[t._v("外部 R1KH 列表，前面记录的")])]),t._v(" "),v("p",[t._v("如果有更多的 AP 需要接入，就是再添加 R0KH 列表和 R0KH 列表。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://file.sm9.top/item/5fbd1d0ab18d6271134fef5a.png",alt:""}})]),t._v(" "),v("p",[v("img",{attrs:{src:"https://file.sm9.top/item/5fbd1d0ab18d6271134fef5c.png",alt:""}})]),t._v(" "),v("h2",{attrs:{id:"测试"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[t._v("#")]),t._v(" 测试")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://file.sm9.top/item/5fbd202fb18d62711350dffa.png",alt:""}})]),t._v(" "),v("h2",{attrs:{id:"参考"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),v("p",[t._v("https://post.smzdm.com/p/aoo866l7/")]),t._v(" "),v("hr")])}),[],!1,null,null,null);a.default=_.exports}}]);